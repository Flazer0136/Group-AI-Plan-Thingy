<style>
.room-item-wrapper {
    position: relative;
}
.delete-room-btn {
    opacity: 0;
    transition: opacity 0.2s;
}
.room-item-wrapper:hover .delete-room-btn {
    opacity: 1;
}
.logout-btn:hover {
    background-color: #000000 !important;
    color: #ffffff !important;
}
</style>

<div class="sidebar">
    <div class="sidebar-header">
        KAPAI
    </div>
    <div class="room-list">
        <a href="{% url 'chat:index' %}" class="room-item {% if not room_name %}active{% endif %}">
            + Join New
        </a>
        
        <div style="padding: 10px 20px; font-size: 12px; font-weight: bold; color: #888;">
            RECENT ROOMS
        </div>

        {% if recent_rooms %}
            {% for visit in recent_rooms %}
            <div class="room-item-wrapper">
                <a href="/chat/{{ visit.room }}/" class="room-item {% if room_name == visit.room %}active{% endif %}" style="display: flex; justify-content: space-between; align-items: center;">
                    <span># {{ visit.room }}</span>
                    <form method="POST" action="{% url 'chat:delete_room' room_name=visit.room %}" style="display: inline; margin: 0;" onsubmit="event.stopPropagation();">
                        {% csrf_token %}
                        <button type="submit" class="delete-room-btn" onclick="return confirm('Delete {{ visit.room }}?')" style="background: none; border: none; color: #888; cursor: pointer; font-size: 16px; padding: 0 5px;">âœ•</button>
                    </form>
                </a>
            </div>
            {% endfor %}
        {% else %}
            <a href="/chat/general/" class="room-item">
                # General
            </a>
            <a href="/chat/random/" class="room-item">
                # Random
            </a>
            <a href="/chat/project-alpha/" class="room-item">
                # Project Alpha
            </a>
        {% endif %}
    </div>

    <form method="POST" action="{% url 'account_logout' %}">
        {% csrf_token %}
        <button type="submit" class="room-item logout-btn" style="width: 100%; text-align: left; cursor: pointer; background-color: #ffffff; border: 2px solid #000000;">
            <- Logout
        </button>
    </form>
</div>
